<!DOCTYPE html>
<html lang="en">
<head>
	<title>Neptune's Dashboard</title>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1" name="viewport">
	<link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" rel="stylesheet" type="text/css">
	<link href="https://cdn.datatables.net/1.10.18/css/dataTables.semanticui.css" rel="stylesheet" type="text/css"/>
	<link href="/styles.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="navbar"></div>
<div class="ui container">
	<div class="ui inverted container segment opacity">
		<h2 class="ui horizontal divider yellow header">Stats</h2>
		<table class="ui single line selectable inverted table opacity" id="stats">
			<thead>
			<tr>
				<th>Alias</th>
				<th>Name</th>
				<th>Team</th>
				<th>Stars</th>
				<th>Ships</th>
				<th>Economy</th>
				<th>$/Turn</th>
				<th>Industry</th>
				<th>Ships/Turn</th>
				<th>Science</th>
			</tr>
			</thead>
		</table>
	</div>
	<div class="ui inverted container segment opacity">
		<h2 class="ui horizontal divider yellow header">Technology</h2>
		<table class="ui single line selectable inverted table opacity" id="tech">
			<thead>
			<tr>
				<th>Alias</th>
				<th>Name</th>
				<th>Team</th>
				<th>Scanning</th>
				<th>Hyperspace</th>
				<th>Terraforming</th>
				<th>Experimentation</th>
				<th>Weapons</th>
				<th>Banking</th>
				<th>Manufacturing</th>
			</tr>
			</thead>
		</table>
	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js" type="text/javascript"></script>
<script src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="https://cdn.datatables.net/1.10.18/js/dataTables.semanticui.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/patternomaly@1.3.2/dist/patternomaly.min.js" type="text/javascript"></script>
<script src="/script.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
	$("#navbar").load("/navbar.html");
	var gameID = window.location.pathname.split("/")[2];
	var stats_table = $('#stats').DataTable({
		"processing" : true,
		"ajax" : {
			"url" : "/api/" + gameID + "/players",
			type: 'GET',
			contentType: 'application/json',
			dataType: 'json',
			dataSrc : ''
		},
		"paging": false,
		"columns" : [
			{ "data" : "alias" },
			{ "data" : "name" },
			{ "data" : "team" },
			{ "data" : "turns.stars", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.ships", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.economy", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.economyPerTurn", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.industry", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.industryPerTurn", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.science", render: $.fn.dataTable.render.number( ',' ) }
		],
		"order": [[3, "desc"], [4, "desc"]]
	});
	$('#stats tbody').on('click', 'tr', function () {
        var data = stats_table.row( this ).data();
        window.location.href = '/games/' + gameID + '/players/' + data.alias;
    });
	var tech_table = $('#tech').DataTable({
		"processing" : true,
		"ajax" : {
			"url" : "/api/" + gameID + "/players",
			type: 'GET',
			contentType: 'application/json',
			dataType: 'json',
			dataSrc : ''
		},
		"paging": false,
		"columns" : [
			{ "data" : "alias" },
			{ "data" : "name" },
			{ "data" : "team" },
			{ "data" : "turns.tech.scanning", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.tech.hyperspace", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.tech.terraforming", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.tech.experimentation", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.tech.weapons", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.tech.banking", render: $.fn.dataTable.render.number( ',' ) },
			{ "data" : "turns.tech.manufacturing", render: $.fn.dataTable.render.number( ',' ) }
		],
		"order": [[0, "asc"]]
	});
});
</script>
</body>
</html>